{"version":3,"file":"index.js","sources":["../lib/helpers.js","../lib/index.js"],"sourcesContent":["class ChaiStuffError extends Error {}\n\nconst fillObj = nonObj => [\n  ...Object.getOwnPropertyNames(nonObj),\n  ...Object.getOwnPropertySymbols(nonObj),\n].reduce((obj, key) => ({...obj, [key]: nonObj[key]}), {});\n\nconst getOwnSortedPropertyNames = obj => Object.getOwnPropertyNames(obj).sort();\n\nconst strictEqual = (actual, expected) => {\n  if (actual !== expected)\n    throw new ChaiStuffError(`expected ${actual} to equal ${expected}`);\n};\n\nconst types = new Map([\n  [Map, map => [...map].reduce((obj, [key, val]) => ({\n    ...obj,\n    [key]: val,\n  }), {})],\n  [Set, set => [...set]],\n  [WeakMap, () => { throw new ChaiStuffError('WeakMaps cannot be compared'); }],\n  [WeakSet, () => { throw new ChaiStuffError('WeakSets cannot be compared'); }],\n  [Number, num => ({Number: +num, ...num})],\n  [String, str => fillObj(str)],\n  [Boolean, bool => ({Boolean: bool.valueOf(), ...bool})],\n]);\n\nexport {\n  ChaiStuffError,\n  fillObj,\n  getOwnSortedPropertyNames,\n  strictEqual,\n  types,\n};\n","import {\n  ChaiStuffError,\n  fillObj,\n  getOwnSortedPropertyNames,\n  strictEqual,\n  types,\n} from './helpers';\n\nconst getSameProps = (alias = 'sameProps') => ({assert}, {addMethod, inspect}) => (\n  addMethod(assert, alias, (actual, expected, message) => {\n    const _actual = {original: actual, converted: actual};\n    const _expected = {original: expected, converted: expected};\n    try {\n      if (Object(actual) !== actual || Object(expected) !== expected)\n        return strictEqual(actual, expected);\n      if (actual instanceof Error) {\n        _actual.converted = fillObj(actual);\n        delete _actual.converted.stack;\n      }\n      if (expected instanceof Error) {\n        _expected.converted = fillObj(expected);\n        delete _expected.converted.stack;\n      }\n      if (types.has(actual.constructor))\n        _actual.converted = types.get(actual.constructor)(actual);\n      else if (actual[Symbol.iterator])\n        _actual.converted = [...actual];\n      if (types.has(expected.constructor))\n        _expected.converted = types.get(expected.constructor)(expected);\n      else if (expected[Symbol.iterator])\n        _expected.converted = [...expected];\n      const actualKeys = getOwnSortedPropertyNames(_actual.converted);\n      assert.deepEqual(actualKeys, getOwnSortedPropertyNames(_expected.converted));\n      assert.isTrue(\n        actualKeys.every(key => _actual.converted[key] === _expected.converted[key]),\n      );\n    } catch (err) {\n      if (err instanceof ChaiStuffError) throw err;\n      const prettify = ({original, converted}) => `${\n        original && original.constructor && original.constructor.name || ''\n      } ${inspect([Object, Array]\n        .some(Class => converted.constructor === Class) ? converted : fillObj(converted))}`;\n      err.message = message || `expected ${\n        prettify(_actual)\n      } to have the same properties as ${\n        prettify(_expected)\n      }`;\n      err.showDiff = true;\n      err.actual = _actual.converted;\n      err.expected = _expected.converted;\n      throw err;\n    }\n  })\n);\n\nconst sameProps = getSameProps();\nconst getSamePropsAlias = alias => getSameProps(alias);\n\nObject.defineProperty(sameProps, 'name', {\n  value: 'sameProps', configurable: true,\n});\n\nexport {\n  sameProps,\n  getSamePropsAlias,\n};\n"],"names":["ChaiStuffError","Error","fillObj","nonObj","Object","getOwnPropertyNames","getOwnPropertySymbols","reduce","obj","key","getOwnSortedPropertyNames","sort","strictEqual","actual","expected","types","Map","map","val","Set","set","WeakMap","WeakSet","Number","num","String","str","Boolean","bool","valueOf","getSameProps","alias","assert","addMethod","inspect","message","_actual","original","converted","_expected","stack","has","constructor","get","Symbol","iterator","actualKeys","deepEqual","isTrue","every","err","prettify","name","Array","some","Class","showDiff","sameProps","getSamePropsAlias","defineProperty","value","configurable"],"mappings":"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"}